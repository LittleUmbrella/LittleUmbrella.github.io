<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <!--<script type="text/javascript" src="infiniteWorkspace.plugin.js"></script>-->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>
<script type="text/javascript" src="https://github.com/SteveSanderson/knockout/raw/master/build/output/knockout-latest.debug.js"></script>
    <script src="js/knockout.namespaces.debug.tf.js" type="text/javascript"></script>
    <script type="text/javascript">        var JSCLASS_PATH = '/js/JS.Class'</script>
    <script src="js/JS.Class/loader-browser.js" type="text/javascript"></script>
    <script src="js/JS.Class/JS.extend.js" type="text/javascript"></script>
    <!--<link href="http://threedubmedia.com/inc/css/base.css" rel="stylesheet" />-->

    <!--<script src="Scripts/jquery.ancestry.js" type="text/javascript"></script>-->
    <!--<script src="Scripts/jquery.hasEventListener-2.0.3.min.js" type="text/javascript"></script>-->
    <!--<script src="file:///E:\comp_backup\Organized\Software\javascript\jquery\events\threedubmedia\event.drag\jquery.event.drag.js" type="text/javascript"></script>
    <script src="file:///E:\comp_backup\Organized\Software\javascript\jquery\events\threedubmedia\event.drag\jquery.event.drag.live.js" type="text/javascript"></script>
    <script src="file:///E:\comp_backup\Organized\Software\javascript\jquery\events\threedubmedia\event.drop\jquery.event.drop.js" type="text/javascript"></script>
    <script src="file:///E:\comp_backup\Organized\Software\javascript\jquery\events\threedubmedia\event.drop\jquery.event.drop.live.js" type="text/javascript"></script>
 -->
    <script src="js/jquery.event.drag.js" type="text/javascript"></script>
    <script src="js/jquery.event.drop.js" type="text/javascript"></script>
    <script src="scripts/jquery.event.dragx.js" type="text/javascript"></script>
    <script src="scripts/jquery.event.dropx.js" type="text/javascript"></script>
    <script src="scripts/jquery.event.drop.tf.js" type="text/javascript"></script>
    <script src="Scripts/jquery.metadata.js" type="text/javascript"></script>
    <script src="Scripts/jquery.event.wheel.js" type="text/javascript"></script>
    <script src="js/jquery.specialkeys.js" type="text/javascript"></script>
    <script src="js/jquery.circle.js" type="text/javascript"></script>
<script src="https://gist.github.com/raw/556448/f6a39882a44c2cc755a8a6f36dadb7947c9f2f3e/jquery.support.cssproperty.js" type="text/javascript"></script>
    

    <script src="js/global.util.debug.js" type="text/javascript"></script>
    <script src="js/shapes.js" type="text/javascript"></script>
    <script src="js/Eaf/core.js" type="text/javascript"></script>
    
    
</head>
<body>
    <!--<div id="header">
        <div data-bind="text: world.name"></div>
        <ul id="RecordsPerPage" data-bind="foreach: {data: world.countries(), options:{viewModel: self} }">
            <div data-bind="dataContext: {data:value, options:{viewModel: options.viewModel} }">
                <li data-bind="text: ctx.name"></li>
                <ul data-bind="foreach: {data: ctx.territories() }">
                    <div data-bind="dataContext: {data:value }">
                        <li data-bind="text: ctx.name"></li>
                        
                    </div>
                </ul>
            </div>
        </ul>
    </div>-->

    <div id="header">
        <div data-bind-demo="text: world.name"></div>
        <ul data-bind-demo="foreach: {data: world.countries(), options:{viewModelCountries: self}, afterRender: self.postRender }">
            <div data-bind-demo="dataContext: {data:value, options:{viewModelCountriesCtx: viewModelCountries} }">
                <li data-bind-demo="text: ctx.name"></li>
                <ul data-bind-demo="foreach: {data: ctx.territories(), options:{viewModelTerritories: viewModelCountriesCtx} }">
                    <div data-bind-demo="dataContext: {data:value, options:{viewModelTerritoriesCtx: viewModelTerritories} }">
                        <li data-bind-demo="text: ctx.name"></li>
                        <ul data-bind-demo="foreach: {data: ctx.cities(), options:{viewModelCities: viewModelTerritoriesCtx} }">
                            <div data-bind-demo="dataContext: {data:value, options:{viewModelCitiesCtx: viewModelCities} }, click: function(){viewModelCities.changeTheWorld.apply(viewModelCities, arguments)}">
                                <li data-bind-demo="text: ctx.name"></li>
                            </div>
                        </ul>
                    </div>
                </ul>
            </div>
        </ul>
    </div>
<!--
             
            -->


    <!--works-->
    <!--<div id="header">
        <div data-bind="text: world.name"></div>
        <ul id="Ul1" data-bind="foreach: {data: world.countries(), options:{viewModelCountries: self}, afterRender: self.postRender }">
            <div data-bind="dataContext: {data:value, options:{viewModelCountriesCtx: viewModelCountries} }">
                <li data-bind="text: ctx.name"></li>
                <ul data-bind="foreach: {data: ctx.territories(), options:{viewModelTerritories: viewModelCountriesCtx} }">
                    <div data-bind="dataContext: {data:value, options:{viewModelTerritoriesCtx: viewModelTerritories} }">
                        <li data-bind="text: ctx.name"></li>
                        <ul data-bind="foreach: {data: ctx.cities(), options:{viewModelCities: viewModelTerritoriesCtx} }">
                            <div data-bind="dataContext: {data:value, options:{viewModelCitiesCtx: viewModelCities} }, click: function(){viewModelCities.changeTheWorld.apply(viewModelCities, arguments)}">
                                <li data-bind="text: ctx.name"></li>
                            </div>
                        </ul>
                    </div>
                </ul>
            </div>
        </ul>
    </div>-->

    <script language="javascript" type="text/javascript">
<!--
        function VM() {
            this.world = ko.observable();

            //var self = this;
            this.self = this;
            this.changeTheWorld = function () {
                this.world.countries.shift();// [1].territories = this.world.countries[2].territories;
                this.world.name("I've changed the world");
            };

            this.postRender = function () {
                //alert('rendered');
            }
        }

        function World (){ this.countries = ko.observableArray(); this.name= ko.observable(); };
        function Country(){ this.territories = ko.observableArray(); this.name= ko.observable(); };
        function Territory(){ this.cities = ko.observableArray(); this.name= ko.observable(); };
        function City (){ this.name= ko.observable(); };

        var world = new World();
        world.name("Earth");

        var vm = new VM();
        vm.world = world;

        ko.applyBindings(vm, 'demo', $('#header').get(0));

        var popGrow = function (cnt) {
            var countryCnt = world.countries().length;

            if (countryCnt > 0) {
                window.clearInterval(interval);
                world.countries()[0].name("Country name has changed!");
            }

            var country = new Country();
            country.name("Country " + cnt);


            var territory = new Territory();
            territory.name("Territory " + cnt);


            var city;
            for (var j = 0; j < cnt; j++) {
                city = new City();
                city.name("City " + cnt + " " + j);
                territory.cities.push(city);
            }


            country.territories.push(territory);

            world.countries.push(country);

            //alert(world.countries().length);

        };


        var i = 1;
        var interval = window.setInterval(function () { popGrow(i++) }, 500);

    //-->
    </Script>
</body>
</html>
